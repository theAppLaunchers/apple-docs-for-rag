

- Core Graphics
-  CGDisplayStreamFrameAvailableHandler 

Type Alias

# CGDisplayStreamFrameAvailableHandler

A block called when a data stream has a new frame event to process.

Mac CatalystmacOS

``` source
typealias CGDisplayStreamFrameAvailableHandler = (CGDisplayStreamFrameStatus, UInt64, IOSurfaceRef?, CGDisplayStreamUpdate?) -> Void
```

## Discussion

The handler is called whenever the display stream has updated content to process as well as when other events occur. Each time a new frame is generated, the block receives an `IOSurface` object that contains the pixel data as well as an update object that describes the frame update.

The handler receives the following parameters:

status  
Describes the kind of update being passed to the handler. See CGDisplayStreamFrameStatus.

displayTime  
The mach absolute time when the event occurred. For a frame event, this is when the frame was displayed by the window server.

frameSurface  
An `IOSurface` object that contains the pixel data. May be `NULL` in some cases.

If you need to maintain a reference to the surface beyond the lifetime of the handler call, you must call the CFRetain function to retain the surface and the IOSurfaceIncrementUseCount(_:) function to let the display stream know that the frame is not ready for re-use. Once you are finished using the surface you must call the IOSurfaceDecrementUseCount(_:) function and then call the CFRelease function. If you are maintaining a cache of information about the surface (such as a GL texture object created from the surface’s contents), you must not call release it until after you remove it from your cache.

You can not depend on the set of surfaces being used by the display stream as being static, so you should remove surfaces from the cache when they haven’t been re-used in a while.

updateRef  
A CGDisplayStreamUpdate reference that holds the update metadata for the current frame.

If you need to hold onto the metadata beyond the lifetime of the handler call, you must call the CFRetain function on the update reference before the end of the handler. When you are finished with the update, call the call the CFRelease function.

This parameter holds `NULL` when the `status` parameter’s has any value other than CGDisplayStreamFrameStatus.frameComplete.

## See Also

### Data Types

typealias CGButtonCount

Represents the number of buttons being set in a synthetic mouse event.

typealias CGCharCode

Represents a character generated by pressing one or more keys on a keyboard.

typealias CGDirectDisplayID

A unique identifier for an attached display.

typealias CGDisplayBlendFraction

The percentage of blend color used in a fade operation.

typealias CGDisplayConfigRef

A reference to a display configuration transaction.

typealias CGDisplayCount

The number of displays in various lists.

Deprecated

typealias CGDisplayErr

A uniform type for result codes returned by functions in Quartz Display Services.

Deprecated

typealias CGDisplayFadeInterval

The duration in seconds of a fade operation or a fade hardware reservation.

typealias CGDisplayFadeReservationToken

A token issued by Quartz when reserving one or more displays for a fade operation during a specified interval.

class CGDisplayMode

A reference to a display mode object.

typealias CGDisplayReconfigurationCallBack

A client-supplied callback function that’s invoked whenever the configuration of a local display is changed.

typealias CGDisplayReservationInterval

The time interval for a fade reservation.

class CGDisplayStream

A reference to a display stream object.

class CGDisplayStreamUpdate

A reference to frame update’s metadata.

class CGEvent

Defines an opaque type that represents a low-level hardware event.

